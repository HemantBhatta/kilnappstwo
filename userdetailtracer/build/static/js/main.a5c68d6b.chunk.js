(this.webpackJsonpuserdetailtracer=this.webpackJsonpuserdetailtracer||[]).push([[0],{136:function(e,t,a){e.exports=a(173)},141:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),i=(a(141),a(56),a(203)),c=a(8),s=a(25),m=a(17),u=a(12),d=a(21),p=a(22),f=a(24),h=a(23),g=a(50),E=a.n(g),v=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken"),b=E.a.create({baseURL:"".concat("https://kilnapps.herokuapp.com","/api"),headers:{"content-type":"application/json","X-CSRFToken":v,Authorization:"Token ".concat(JSON.parse(localStorage.getItem("item")))}}),k=r.a.createContext(),y=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={workersInfo:[],sortedWorkersInfo:[],singleWorkerInfo:"",editWorkerInfoId:"",kilnInfo:[],sortedkilnInfo:[],kname:"All",gender:"All",searchbyworkername:"",searchbycode:"",searchbycountry:"",searchbydistrict:"All",searchbymunicipality:"All",searchbyward:"",searchbyworkercategory:"All",searchbynaike_f_name:"",searchbykilnname:"",mobileNav:!1,searchbykiln:"",searchbykilnowner:"",ModalStatus:!1,ModalData:[],alertData:null,csrftoken:"",user:null,offlineWorkers:{},moneypaidworker:"All",moneypaidkiln:"All",InitialDataStatus:!1,csvData:[],csvKilnData:[]},e.fetchAllData=function(){if(localStorage.getItem("app-datam")){var t=JSON.parse(localStorage.getItem("app-data"));e.setState({workersInfo:t.workersInfo,sortedWorkersInfo:t.workersInfo,kilnInfo:t.kilnInfo,sortedkilnInfo:t.kilnInfo,offlineWorkers:t.offlineWorkers,user:t.user,InitialDataStatus:!0}),Object.keys(t.offlineWorkers).length&&console.log(Object.values(t.offlineWorkers))}else Promise.all([b.get("workers"),b.get("kiln"),b.get("user")]).then((function(t){var a=Object(u.a)(t,3),n=a[0],r=a[1],l=a[2];e.hookState({workersInfo:n.data,sortedWorkersInfo:n.data,kilnInfo:r.data,sortedkilnInfo:r.data,user:l.data,InitialDataStatus:!0})})).catch((function(e){return console.log(e)}))},e.hookState=function(t,a){e.setState(t,a);var n=e.state,r=n.workersInfo,l=n.kilnInfo,o=n.user,i=n.offlineWorkers;localStorage.setItem("app-data",JSON.stringify({workersInfo:r,kilnInfo:l,user:o,offlineWorkers:i}))},e.KilnNewStatefunc=function(t){e.hookState({sortedkilnInfo:t,kilnInfo:t})},e.WorkerNewStatefunc=function(t){e.hookState({workersInfo:t,sortedWorkersInfo:t})},e.WorkerEditStatefunc=function(t){var a=e.state.workersInfo,n=a.findIndex((function(e){return e.id===t.id}));n>-1&&(a.splice(n,1,t),e.hookState({workersInfo:a,sortedWorkersInfo:a}))},e.WorkerEditPaymentFunc=function(t){e.state.offlineWorkers[t.id]=t,e.hookState({offlineWorkers:e.state.offlineWorkers})},e.ChangeOptionFilter=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(m.a)({},n,a),(function(){e.filterAllOptions(),e.filterKilnData()}))},e.filterAllOptions=function(){var t=e.state,a=t.kname,n=t.workersInfo,r=t.gender,l=t.searchbyworkername,o=t.searchbydistrict,i=t.searchbymunicipality,c=t.searchbyworkercategory,m=t.searchbynaike_f_name,u=t.searchbycode,d=Object(s.a)(n);if(""!==l){var p=l.toLowerCase();d=d.filter((function(e){return e.f_name.toLowerCase().includes(p)}))}if(""!==u){var f=u.toLowerCase();d=d.filter((function(e){return e.code.toLowerCase().includes(f)}))}if(""!==m){var h=m.toLowerCase();d=d.filter((function(e){return e.naike_name&&e.naike_name.toLowerCase().includes(h)}))}if("All"!==r){var g=r.toLowerCase();d=d.filter((function(e){return e.gender&&e.gender.toLowerCase().startsWith(g)}))}if("All"!==o){var E=o.toLowerCase();d=d.filter((function(e){return e.district.toLowerCase().includes(E)}))}if("All"!==i){var v=i.toLowerCase();d=d.filter((function(e){return e.municipality&&e.municipality.toLowerCase().includes(v)}))}if("All"!==c){var b=c.toLowerCase();d=d.filter((function(e){return e.category&&e.category.toLowerCase().includes(b)}))}if("All"!==a){var k=a.toLowerCase();d=d.filter((function(e){return e.kiln.name.toLowerCase()===k}))}e.hookState({sortedWorkersInfo:d},(function(){e.CsvWorkerDataFunc()}))},e.filterKilnData=function(){var t=e.state,a=t.kilnInfo,n=t.searchbykiln,r=Object(s.a)(a);if(""!==n){var l=n.toLowerCase();r=r.filter((function(e){return e.name.toLowerCase().includes(l)}))}e.hookState({sortedkilnInfo:r},(function(){return e.CsvKilnDataFunc()}))},e.ReduceKeyValFunc=function(e){for(var t={},a=function(){var e=Object(u.a)(r[n],2);l=e[0];var a=(o=e[1]).reduce((function(e,t){return null!==t.extra?e+=parseInt(t.extra.amount):e}),0);i=o.reduce((function(e,t){return e[l]={peoplecount:o.length,totalamount:a},e}),{}),t=Object(c.a)(Object(c.a)({},t),i)},n=0,r=Object.entries(e);n<r.length;n++){var l,o,i;a()}return t},e.clone=function(e){return JSON.parse(JSON.stringify(e))},e.CsvWorkerDataFunc=function(){var t=e.state.sortedWorkersInfo,a=e.clone(t).map((function(e){return e.kilnname=e.kiln.name,e.kilnaddress=e.kiln.address,null!==e.extra&&(e.amountpaid=e.extra.payment.amount,e.amountpayer=e.extra.payment.amountpayer.username),null!==e.children&&(e.children=e.children.map((function(e){return e.join("/")})).join(",")),delete e.kiln,e}));e.setState({csvData:a})},e.CsvKilnDataFunc=function(){var t=e.state.sortedkilnInfo,a=e.clone(t).map((function(e){return e}));e.setState({csvKilnData:a})},e.OpenNavMenu=function(){e.hookState({mobileNav:!0})},e.CloseNavMenu=function(){e.hookState({mobileNav:!1})},e.filterById=function(e,t){return t.filter((function(t){return t.id!==e}))},e.deleteWorker=function(t){b({method:"DELETE",url:"workers/".concat(t)}).then((function(a){if(204===a.status&&"No Content"===a.statusText){e.hookState({alertData:{type:"success",msg:"Worker deleted successfully"}});var n=e.filterById(t,e.state.workersInfo);e.hookState({workersInfo:n,sortedWorkersInfo:n,searchbyworkername:"",gender:"All",searchbydistrict:"All",searchbymunicipality:"All",searchbyworkercategory:"All",searchbynaike_f_name:"",searchbykilnname:""})}})).catch((function(t){e.hookState({alertData:{type:"error",msg:"Something went wrong. Please try again."}})}))},e.deleteKiln=function(t){b({method:"DELETE",url:"kiln/".concat(t)}).then((function(a){if(204===a.status&&"No Content"===a.statusText){e.hookState({alertData:{type:"success",msg:"Kiln deleted successfully"}});var n=e.filterById(t,e.state.kilnInfo);e.hookState({kilnInfo:n,sortedkilnInfo:n,searchbykiln:""})}})).catch((function(t){e.hookState({alertData:{type:"error",msg:"Something went wrong. Please try again."}})}))},e.isSuperUser=function(){return navigator.onLine&&e.state.user&&e.state.user.is_superuser},e.OpenModal=function(t){var a=e.state.workersInfo.filter((function(e){return e.id===t}));e.hookState({ModalStatus:!0,ModalData:a})},e.CloseModal=function(t){e.hookState({ModalStatus:!1})},e.AlertFunc=function(t){e.hookState({alertData:t})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchAllData()}},{key:"render",value:function(){return r.a.createElement(k.Provider,{value:Object(c.a)(Object(c.a)({},this.state),{},{ChangeOptionFilter:this.ChangeOptionFilter,SearchWorkerName:this.SearchWorkerName,EditWorker:this.EditWorker,OpenNavMenu:this.OpenNavMenu,CloseNavMenu:this.CloseNavMenu,deleteWorker:this.deleteWorker,deleteKiln:this.deleteKiln,fetchAllData:this.fetchAllData,KilnNewStatefunc:this.KilnNewStatefunc,WorkerNewStatefunc:this.WorkerNewStatefunc,WorkerEditStatefunc:this.WorkerEditStatefunc,OpenModal:this.OpenModal,CloseModal:this.CloseModal,AlertFunc:this.AlertFunc,isSuperUser:this.isSuperUser,WorkerEditPaymentFunc:this.WorkerEditPaymentFunc,CsvWorkerDataFunc:this.CsvWorkerDataFunc,CsvKilnDataFunc:this.CsvKilnDataFunc})},this.props.children)}}]),a}(n.Component),I=(k.Consumer,a(107)),S=function(){var e=Object(n.useContext)(k),t=e.csvData,a=e.CsvWorkerDataFunc;Object(n.useEffect)((function(){a()}),[]);return r.a.createElement("div",null,r.a.createElement(I.CSVLink,{filename:"kiln-workers.csv",data:t,headers:[{label:"First Name",key:"f_name"},{label:"Last Name",key:"l_name"},{label:"Naike",key:"naike_name"},{label:"NaikePhone",key:"naike_phone"},{label:"Priority",key:"priority"},{label:"Ngo",key:"org"},{label:"Duplicate",key:"duplicate"},{label:"Gender",key:"gender"},{label:"Age",key:"age"},{label:"Country",key:"country"},{label:"District",key:"district"},{label:"Municipality",key:"municipality"},{label:"Ward",key:"ward"},{label:"Category",key:"category"},{label:"Kiln Id",key:"kiln_id"},{label:"Children",key:"children"},{label:"Kiln",key:"kilnname"},{label:"Kiln Address",key:"kilnaddress"},{label:"Amount Paid",key:"amountpaid"},{label:"Amount Payer",key:"amountpayer"}]},r.a.createElement(i.a,{variant:"contained",color:"secondary"},"ExportCSV")))},w=a(13),C=function(){return r.a.createElement("div",null,r.a.createElement(w.a,{to:{pathname:"workers"}}))},x=a(205),O=a(220),N=a(223),W=a(206),j=a(207),L=a(224),A=a(174),D=a(69),P=a.n(D),_=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userInfo:{username:"",first_name:"",last_name:"",email:"",password:""},alertInfo:e.context.alertData},e.InputHandle=function(t){var a=t.target.value,n=t.target.name;e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},n,a))}))},e.login=function(t){t.preventDefault(),E()({method:"POST",headers:{"X-CSRFToken":v},url:"".concat("https://kilnapps.herokuapp.com","/auth/"),data:e.state}).then((function(t){localStorage.setItem("item",JSON.stringify(t.data.token)),e.setState({}),window.location.href=""})).catch((function(t){return e.setState({alertInfo:{type:"error",msg:"Something went wrong. Please try again."}})}))},e.isAuthenticated=function(){var e=localStorage.getItem("item");return e&&e.length>10},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.alertInfo!==this.state.alertInfo&&this.context.AlertFunc(this.state.alertInfo)}},{key:"render",value:function(){var e=this.isAuthenticated(),t=this.props.classes;return r.a.createElement("div",null,e?r.a.createElement(w.a,{to:{pathname:"workers"}}):r.a.createElement(x.a,{maxWidth:"sm",component:"main"},r.a.createElement(O.a,{component:"div",mt:10},r.a.createElement("div",{className:t.paper},r.a.createElement(O.a,{component:"div",my:1},r.a.createElement(N.a,{className:t.avatar},r.a.createElement(P.a,null))),r.a.createElement(O.a,{component:"div",mb:2},r.a.createElement(W.a,{component:"h1",variant:"h5"},"Login")),r.a.createElement("form",{className:t.form,onSubmit:this.login},r.a.createElement(j.a,{container:!0,spacing:2},r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(L.a,{autoComplete:"username",variant:"outlined",required:!0,fullWidth:!0,name:"username",value:this.state.username,onChange:this.InputHandle,id:"userName",label:"User Name",autoFocus:!0})),r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(L.a,{variant:"outlined",required:!0,fullWidth:!0,value:this.state.password,onChange:this.InputHandle,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(O.a,{component:"div",my:3},r.a.createElement(i.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Login")))))))}}]),a}(r.a.Component);_.contextType=k;var M=Object(A.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{backgroundColor:"#3f51b5"},form:{width:"100%"},submit:{}}}))(_),T=a(10),F=function(){return localStorage.removeItem("item"),localStorage.removeItem("app-data"),r.a.createElement("div",{className:"logoutSection"},r.a.createElement("div",{className:"logoutIn"},r.a.createElement("h2",null,"You have been successfully logged out."),r.a.createElement(O.a,{component:"div",mb:2}),r.a.createElement(T.b,{to:"login"},r.a.createElement(i.a,{variant:"contained",color:"primary"},"Login Again"))))},H=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userInfo:{username:"",first_name:"",last_name:"",email:"",password:"",ngo:window.location.toString().split("ngo=")[1]},alertInfo:e.context.alertData},e.register=function(t){t.preventDefault(),E()({method:"POST",headers:{"X-CSRFToken":v},url:"".concat("https://kilnapps.herokuapp.com","/api/users/"),data:e.state.userInfo}).then((function(t){201===t.status&&"Created"===t.statusText&&(e.setState({alertInfo:{type:"success",msg:"Worker Registered Successfully."}}),e.setState((function(t){return{prevState:t,userInfo:e.state.userInfo}})),window.location.href="/#/login")})).catch((function(t){e.setState({alertInfo:{type:"error",msg:"Something went wrong. Please try again."}})}))},e.InputHandle=function(t){var a=t.target.value,n=t.target.name,r=e.state.userInfo;e.setState({userInfo:Object(c.a)(Object(c.a)({},r),{},Object(m.a)({},n,a))})},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.alertInfo!==this.state.alertInfo&&this.context.AlertFunc(this.state.alertInfo)}},{key:"render",value:function(){var e=this.props.classes;return this.state.userInfo.ngo?r.a.createElement("div",null,r.a.createElement(x.a,{maxWidth:"sm",component:"main"},r.a.createElement(O.a,{component:"div",mt:5},r.a.createElement("div",{className:e.paper},r.a.createElement(O.a,{component:"div",my:1},r.a.createElement(N.a,{className:e.avatar},r.a.createElement(P.a,null))),r.a.createElement(O.a,{component:"div",mb:2},r.a.createElement(W.a,{component:"h1",variant:"h5"},"Register")),r.a.createElement("form",{className:e.form,onSubmit:this.register},r.a.createElement(j.a,{container:!0,spacing:2},r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{autoComplete:"username",variant:"outlined",required:!0,fullWidth:!0,name:"username",value:this.state.username,onChange:this.InputHandle,id:"userName",label:"User Name",autoFocus:!0})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{autoComplete:"fname",variant:"outlined",fullWidth:!0,name:"first_name",value:this.state.first_name,onChange:this.InputHandle,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{autoComplete:"lname",variant:"outlined",fullWidth:!0,name:"last_name",value:this.state.last_name,onChange:this.InputHandle,id:"lastName",label:"Last Name",autoFocus:!0})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",required:!0,fullWidth:!0,value:this.state.email,onChange:this.InputHandle,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(L.a,{variant:"outlined",required:!0,fullWidth:!0,value:this.state.password,onChange:this.InputHandle,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(O.a,{component:"div",my:3},r.a.createElement(i.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Register"))),r.a.createElement(j.a,{container:!0,justify:"flex-end"},r.a.createElement(j.a,{item:!0},r.a.createElement(W.a,null,r.a.createElement(T.b,{href:"#login",variant:"body2",className:"alreadyLogin"},"Already have an account? Login")))))))):r.a.createElement(w.a,{to:{pathname:"/login"}})}}]),a}(r.a.Component);H.contextType=k;var K=Object(A.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{backgroundColor:"#3f51b5"},form:{width:"100%"},submit:{}}}))(H),B=a(211),U=function(){return r.a.createElement("div",{className:"errorSection"}," ",r.a.createElement(B.a,{style:{padding:"20px"}},r.a.createElement(W.a,{color:"primary",component:"h1",variant:"h4"},"Error! 404 Not Found")))},R=a(212),q=a(213),z=a(112),G=a.n(z),J=a(113),V=a.n(J),X=function(){var e=Object(n.useContext)(k),t=e.mobileNav,a=e.CloseNavMenu,l=e.OpenNavMenu,o=function(){var e=localStorage.getItem("item");return e&&e.length>10}();return r.a.createElement("div",null,r.a.createElement(R.a,{position:"static"},r.a.createElement(q.a,{className:"nav"},r.a.createElement("div",{className:"navLeft"},r.a.createElement(W.a,{edge:"start",className:"logoTitle",variant:"h6"},"Global Fairness Initiative"),r.a.createElement("div",{className:"burgerBar"},t?r.a.createElement(G.a,{onClick:function(){return a()}}):r.a.createElement(V.a,{onClick:function(){return l()}}))),r.a.createElement("div",{className:t?"navRight hide":"navRight"},r.a.createElement(T.b,{to:"/kilnlist"},r.a.createElement(i.a,{className:"loginButton"},"Kiln")),r.a.createElement(T.b,{to:"/workers"},r.a.createElement(i.a,{className:"loginButton"},"Workers")),r.a.createElement(T.b,{to:"/ngos"},r.a.createElement(i.a,{className:"loginButton"},"Ngos")),r.a.createElement("div",null,o?r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement(T.b,{to:"/logout"},r.a.createElement(i.a,{onClick:function(){return window.location.reload()},className:"loginButton"},"Logout")))):r.a.createElement("span",null,r.a.createElement(T.b,{to:"/login"},r.a.createElement(i.a,{className:"loginButton",variant:"h6"},"Login"))))))))},Y=a(71),$=a.n(Y),Q=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={valuea:e.context.ModalData,paymentdat:{amount:"",timeofpay:"",amountpayer:e.context.user&&e.context.user.username}},e.handleChangeAmount=function(t){var a=t.target.value;e.setState({paymentdat:Object(c.a)(Object(c.a)({},e.state.paymentdat),{},{amount:a,timeofpay:(new Date).toLocaleString()})})},e.setUpdatedPayment=function(t){e.context.WorkerEditStatefunc(t)},e.handleSubmit=function(t){t.preventDefault();var a=e.context.ModalData[0];a.extra||(a.extra={}),a.extra.payment=Object(c.a)(Object(c.a)({},e.state.paymentdat),{},{amountpayer:e.context.user});var n=e.context.ModalData.map((function(e){return e.id}));b({method:"PUT",url:"workers/".concat(n[0]),data:a}).then((function(t){200===t.status&&"OK"===t.statusText&&e.setUpdatedPayment(a)})).catch((function(t){e.setState({})}))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.context,t=e.CloseModal,a=e.ModalStatus;e.ModalData,e.user;return r.a.createElement("div",{className:a?"modalOverlay":"hideModal"},r.a.createElement(x.a,{maxWidth:"sm",component:"main"},r.a.createElement("div",{className:"modalInner"},r.a.createElement($.a,{className:"CloseModelIcon",onClick:function(){return t()}}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",null,"Enter Amount"),r.a.createElement(L.a,{id:"outlined-full-width",label:"Enter Amount",placeholder:"Enter Amount",helperText:"",fullWidth:!0,value:this.state.paymentdat.amount,onChange:this.handleChangeAmount,name:"amount",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined"}),r.a.createElement(i.a,{style:{marginTop:8},type:"submit",variant:"contained",color:"primary",onClick:function(){t()}},"Save Payment")))))}}]),a}(r.a.Component);Q.contextType=k;var Z=Q,ee=a(214),te=function(){return r.a.createElement("div",{className:"spinnerSection"},r.a.createElement("div",null,r.a.createElement(ee.a,{color:"secondary"})))},ae=a(215),ne=a(216),re=a(30),le=Object(ae.a)({root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:8},buttonMargin:{marginTop:15,marginRight:15}}),oe=function(e){var t=e.worker,a=Object(n.useContext)(k),l=a.deleteWorker,o=a.OpenModal,c=a.isSuperUser,s=a.user,m=le();return r.a.createElement(j.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(B.a,{className:m.root},r.a.createElement(ne.a,null,r.a.createElement(W.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.f_name," ",t.l_name),r.a.createElement(W.a,{gutterBottom:!0,variant:"h6"},t.code),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"Category: ",t.category),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"Naike: ",t.naike_name),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"Gender: ",t.gender),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"Age: ",t.age),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"District: ",t.district),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"Municipality: ",t.municipality),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"Ward: ",t.ward),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"Phone: ",t.phone),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},"Kiln: ",t.kiln.name),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"p"},r.a.createElement("span",null,"Children :"),t.children?t.children.map((function(e,t){return r.a.createElement("span",{key:t,style:{marginLeft:"10px",borderBottom:"1px solid"}},e.join("/"))})):null),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"div"},r.a.createElement("span",null,"Paid By: "),t.extra&&t.extra.payment?r.a.createElement("div",{style:{display:"inline"}},r.a.createElement("strong",null,t.extra.payment.amountpayer.username)," from",r.a.createElement("strong",null," ",t.extra.payment.amountpayer.ngo.name)):"None"),r.a.createElement(W.a,{className:m.pos,variant:"body1",component:"div"},r.a.createElement("span",null,"Paid Amount:  "),t.extra&&t.extra.payment?r.a.createElement(W.a,{variant:"subtitle2",display:"inline"},"Rs.",t.extra.payment.amount):"Not Paid"),r.a.createElement("span",null,c()?r.a.createElement("span",null,r.a.createElement(T.b,{to:"/workers/".concat(t.id,"/")},r.a.createElement(i.a,{className:m.buttonMargin,variant:"contained",color:"primary"},"Edit")),r.a.createElement(i.a,{onClick:function(){var e;l(t.id),e="Home",re.scroller.scrollTo(e,{duration:1e3,delay:100,smooth:!0})},className:m.buttonMargin,variant:"contained",color:"secondary"},"Delete")):null," "),s.ngo?r.a.createElement("span",null,r.a.createElement(i.a,{onClick:function(){return o(t.id)},variant:"contained",color:"secondary",className:m.buttonMargin},"Payment")):"")))},ie=a(72),ce=a.n(ie),se=function(e){var t=e.title;e.children;return r.a.createElement("div",{className:"title"},r.a.createElement("p",null,t),r.a.createElement("div",null))},me=a(226),ue=a(227),de=a(210),pe=a(219),fe=Object(ae.a)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},inputSection:{width:"95%",margin:"auto"}}})),he=function(){var e=fe(),t=Object(n.useContext)(k),a=t.workersInfo,l=t.kname,o=t.gender,i=t.searchbyworkername,c=t.searchbycode,m=t.ChangeOptionFilter,u=t.searchbydistrict,d=t.searchbymunicipality,p=t.searchbyworkercategory,f=t.searchbynaike_f_name,h=function(e,t){return[].concat(Object(s.a)(new Set(e.map((function(e){return e[t]})))),["All"])},g=function(e,t){return e.map((function(e,t){return r.a.createElement(ue.a,{key:t,value:e},e)}))},E=g(h(a,"category")),v=g(h(a,"district")),b=g(h(a,"municipality")),y=a.map((function(e){return e.kiln.name})),I=[].concat(Object(s.a)(new Set(y)),["All"]).sort().map((function(e,t){return r.a.createElement(ue.a,{key:t,value:e},e)}));return r.a.createElement("div",null,r.a.createElement("div",{className:e.inputSection},r.a.createElement(j.a,{container:!0,spacing:4},r.a.createElement(j.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(L.a,{fullWidth:!0,label:"Search by Name",id:"outlined-size-small",name:"searchbyworkername",value:i,onChange:m,variant:"outlined"})),r.a.createElement(j.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(L.a,{fullWidth:!0,label:"Search by Code",id:"outlined-size-small",name:"searchbycode",value:c,onChange:m,variant:"outlined"})),r.a.createElement(j.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(L.a,{fullWidth:!0,label:"Search by Naike name",id:"outlined-size-normal",name:"searchbynaike_f_name",value:f,onChange:m,variant:"outlined"})),r.a.createElement(j.a,{item:!0,xs:6,sm:6,md:4,className:"categoryMargin"},r.a.createElement(de.a,{variant:"outlined",className:e.formControl},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"By Category"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"searchbyworkercategory",value:p,onChange:m,label:"Category"},E))),r.a.createElement(j.a,{item:!0,xs:6,sm:4},r.a.createElement(de.a,{variant:"outlined",className:e.formControl},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"By District"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"searchbydistrict",value:u,onChange:m,label:"Districtname"},v))),r.a.createElement(j.a,{item:!0,xs:6,sm:4},r.a.createElement(de.a,{variant:"outlined",className:e.formControl},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"By Municipality"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"searchbymunicipality",value:d,onChange:m,label:"Municipalityname"},b))),r.a.createElement(j.a,{item:!0,xs:6,sm:4},r.a.createElement(de.a,{variant:"outlined",className:e.formControl},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"By Kiln"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"kname",value:l,onChange:m,label:"Kilnname"},I))),r.a.createElement(j.a,{item:!0,xs:6,sm:4},r.a.createElement(de.a,{variant:"outlined",className:e.formControl},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"By Gender"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"gender",value:o,onChange:m,label:"Gender"},r.a.createElement(ue.a,{value:"All"},"All"),r.a.createElement(ue.a,{value:"Male"},"Male"),r.a.createElement(ue.a,{value:"Female"},"Female"),r.a.createElement(ue.a,{value:"Others"},"Others")))))))},ge=a(221),Ee=function(e){var t=e.itemsPerPage,a=e.totalItems,n=e.paginate,l=r.a.useState(1),o=Object(u.a)(l,2),i=o[0],c=o[1];return r.a.createElement("div",{className:"paginateClass"},r.a.createElement("div",null,r.a.createElement(ge.a,{count:Math.ceil(a/t),onClick:n(i),page:i,onChange:function(e,t){c(t)},color:"secondary",className:"paginateInner"})),r.a.createElement("div",null))},ve=a(51),be=a.n(ve),ke=Object(ae.a)((function(e){return{pos:{marginTop:15,width:"95%",margin:"auto"},addIcon:{width:"95%",marginTop:30,margin:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",color:"primary"},AddIconLink:{display:"flex",alignItems:"center",textDecoration:"none"}}})),ye=function(){var e=ke(),t=function(){var e=localStorage.getItem("item");return e&&e.length>10}(),a=Object(n.useContext)(k),l=a.sortedWorkersInfo,o=a.isSuperUser,i=a.workersInfo,c=a.csvData,s=a.CsvWorkerDataFunc,m=Object(n.useState)(1),d=Object(u.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(9),g=Object(u.a)(h,1)[0];if(!l)return r.a.createElement(te,null);var E=p*g,v=E-g,b=l.slice(v,E).map((function(e){return r.a.createElement(oe,{worker:e,key:e.id})}));return r.a.createElement("div",{className:"workerList-Section"},t?r.a.createElement("div",null,o()?r.a.createElement("span",{className:e.addIcon},r.a.createElement(T.b,{to:"/inputnewworker",className:e.AddIconLink},r.a.createElement(ce.a,{color:"primary",fontSize:"large"}),r.a.createElement(W.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Add new worker")),r.a.createElement(T.b,{to:"/summary",className:e.AddIconLink},r.a.createElement(W.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Summary"),r.a.createElement(be.a,{color:"primary",fontSize:"large"}))):"",r.a.createElement(se,{title:"Workers List"}),r.a.createElement(he,null),r.a.createElement(O.a,null,r.a.createElement(W.a,{variant:"h5",className:"SelectedWorkers"},"Selected ",r.a.createElement("strong",{className:"sortedOutof"},l.length)," out of ",r.a.createElement("strong",{className:"sortedOutoflength"},i.length)," workers")),r.a.createElement("div",{className:e.pos},r.a.createElement(j.a,{container:!0,spacing:2},b)),r.a.createElement("div",{className:"CsvBtnSec"},r.a.createElement(Ee,{itemsPerPage:g,totalItems:l.length,paginate:function(e){f(e)},csvData:c,csvFunc:s,csvheader:["Id","First Name","Last Name","Naike Name","NaikePhone","Priority","Ngo","Duplicate","Gender","Age","Country","District","Municipality","Village","Ward","Phone","Category","Kiln Id","Children","Kiln","Kiln Address","Amount Paid","Amount Payer"]}),r.a.createElement("div",{className:"csvbtn"},r.a.createElement(S,null)))):r.a.createElement(w.a,{to:{pathname:"/login"}}))},Ie=Object(ae.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},formControl:{minWidth:120}}})),Se=function(e){var t=e.SubmitHandler,a=e.valuea,n=e.InputHandler,l=e.kilnlist,o=e.InputHandlerKiln,c=Ie(),s=l.map((function(e){return r.a.createElement(ue.a,{key:e.id,value:e.id},e.name,", ",e.address)}));return r.a.createElement(x.a,{maxWidth:"sm",component:"main"},r.a.createElement("div",{className:c.paper},r.a.createElement(se,{title:"Add Worker"}),r.a.createElement("form",{className:c.form,action:"",onSubmit:t},r.a.createElement(j.a,{container:!0,spacing:2},r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"f_name",value:a.f_name,onChange:n,id:"standard-basic",label:"Enter Firstname",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"l_name",value:a.l_name,onChange:n,id:"standard-basic",label:"Enter Lastname",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"naike_name",value:a.naike_name,onChange:n,id:"standard-basic",label:"Enter Naike name",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",required:!0,fullWidth:!0,margin:"normal",name:"age",value:a.age,onChange:n,id:"standard-basic",label:"Enter Age",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"country",value:a.country,onChange:n,id:"standard-basic",label:"Enter Country",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"district",value:a.district,onChange:n,id:"standard-basic",label:"Enter District",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"municipality",value:a.municipality,onChange:n,id:"standard-basic",label:"Enter Municipality",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"ward",value:a.ward,onChange:n,id:"standard-basic",label:"Enter Ward",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"category",value:a.category,onChange:n,id:"standard-basic",label:"Enter Category",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"phone",value:a.phone,onChange:n,id:"standard-basic",label:"Enter Phone",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:12},r.a.createElement(de.a,{variant:"outlined",required:!0,fullWidth:!0,className:c.formControl},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"Gender"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:a.gender,name:"gender",onChange:n,label:"gender",InputLabelProps:{shrink:!0}},r.a.createElement(ue.a,{value:"MALE"},"Male"),r.a.createElement(ue.a,{value:"FEMALE"},"Female"),r.a.createElement(ue.a,{value:"OTHERS"},"Others")))),r.a.createElement(j.a,{item:!0,xs:12,sm:12},r.a.createElement(de.a,{variant:"outlined",fullWidth:!0,required:!0,className:c.formControl},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"Kiln Name"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:a.kiln_id,name:"kiln_id",onChange:o,label:"kiln",InputLabelProps:{shrink:!0}},s)))),r.a.createElement(i.a,{onClick:function(){return e="Home",void re.scroller.scrollTo(e,{duration:1e3,delay:100,smooth:!0});var e},className:c.submit,fullWidth:!0,type:"submit",variant:"contained",color:"primary"},"Submit"))))},we=function(){var e=Object(n.useContext)(k),t=e.workersInfo,a=e.WorkerNewStatefunc,l=e.kilnInfo,o=e.alertData,i=e.AlertFunc,d=function(){var e=localStorage.getItem("item");return e&&e.length>10}(),p={f_name:"",l_name:"",naike_name:"",naike_l_name:"",gender:"",age:"",country:"",district:"",municipality:"",ward:"",category:"",phone:"",salary:"",kiln_id:"",extra:null,children:[]},f=Object(n.useState)(p),h=Object(u.a)(f,2),g=h[0],E=h[1],v=Object(n.useState)(t),y=Object(u.a)(v,2),I=y[0],S=y[1],C=Object(n.useState)(o),x=Object(u.a)(C,2),O=x[0],N=x[1];Object(n.useEffect)((function(){a(Object(s.a)(I))}),[I]),Object(n.useEffect)((function(){i(O)}),[O]);return r.a.createElement("div",{className:"workerInputSection"},d?r.a.createElement("div",null,r.a.createElement(Se,{kilnlist:l,InputHandlerKiln:function(e){var t=e.target.name,a=e.target.value;E((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},t,a))}))},InputHandler:function(e){var t=e.target.name,a=e.target.value;a=a.toUpperCase(),E((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},t,a))}))},SubmitHandler:function(e){e.preventDefault();var t=I.reduce((function(e,t){return e[t.code]=!0,e}),{});g.code=function(e,t){for(var a="".concat(e.f_name.substr(0,2)).concat(e.l_name.substr(0,2),"-").concat(e.gender[0],"-").concat(e.age).toUpperCase(),n=a,r=1;t[n];)n="".concat(a,"-").concat(r),r++;return n}(g,t),b({method:"POST",url:"workers/",data:g}).then((function(e){g.id=e.data.id,g.kiln=l.find((function(e){return e.id===g.kiln_id})),S([].concat(Object(s.a)(I),[g])),201===e.status&&"Created"===e.statusText&&N({type:"success",msg:"Worker saved"})})).catch((function(e){N({type:"error",msg:"Something went wrong. Please try again."})})),E(p)},valuea:g})):r.a.createElement(w.a,{to:{pathname:"login"}}))},Ce=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={singleWorkerInfo:{},id:e.props.match.params.id,alertInfo:e.context.alertData},e.scrollToElement=function(e){re.scroller.scrollTo(e,{duration:1e3,delay:100,smooth:!0})},e.InputHandler=function(t){var a=t.target.name,n=t.target.value;n=n.toUpperCase();var r=Object(c.a)(Object(c.a)({},e.state.singleWorkerInfo),{},Object(m.a)({},a,n));e.setState({singleWorkerInfo:r})},e.InputHandlerKiln=function(t){var a=t.target.name,n=t.target.value,r=Object(c.a)(Object(c.a)({},e.state.singleWorkerInfo),{},Object(m.a)({},a,n));e.setState({singleWorkerInfo:r})},e.SubmitHandler=function(t){t.preventDefault(),b({method:"PUT",url:"workers/".concat(e.state.singleWorkerInfo.id),data:e.state.singleWorkerInfo}).then((function(t){200===t.status&&"OK"===t.statusText&&(e.state.singleWorkerInfo.id=t.data.id,e.state.singleWorkerInfo.kiln=e.context.kilnInfo.find((function(t){return t.id===e.state.singleWorkerInfo.kiln_id})),e.context.WorkerEditStatefunc(e.state.singleWorkerInfo),e.setState({alertInfo:{type:"success",msg:"Worker Updated Successfully"}}))})).catch((function(t){e.setState({alertInfo:{type:"error",msg:"Something went wrong. Please try again."}})}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;b({method:"GET",url:"workers/".concat(this.state.id)}).then((function(t){e.setState({singleWorkerInfo:t.data})})).catch((function(e){return console.log(e)}))}},{key:"componentDidUpdate",value:function(e,t){t.alertInfo!==this.state.alertInfo&&this.context.AlertFunc(this.state.alertInfo)}},{key:"render",value:function(){var e=this,t=this.context.kilnInfo.map((function(e){return r.a.createElement(ue.a,{value:e.id},e.name)}));return r.a.createElement(x.a,{maxWidth:"sm",component:"main"},r.a.createElement("div",null,r.a.createElement(se,{title:"Update Worker"}),r.a.createElement("form",{action:"",onSubmit:this.SubmitHandler},r.a.createElement(j.a,{container:!0,spacing:2},r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"f_name",value:this.state.singleWorkerInfo.f_name,onChange:this.InputHandler,id:"standard-basic",label:"Enter firstname",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"l_name",value:this.state.singleWorkerInfo.l_name,onChange:this.InputHandler,id:"standard-basic",label:"Enter lastname",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"naike_name",value:this.state.singleWorkerInfo.naike_name,onChange:this.InputHandler,id:"standard-basic",label:"Enter naike_name",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"country",value:this.state.singleWorkerInfo.country,onChange:this.InputHandler,id:"standard-basic",label:"Enter country",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",required:!0,fullWidth:!0,margin:"normal",name:"age",value:this.state.singleWorkerInfo.age,onChange:this.InputHandler,id:"standard-basic",label:"Enter age",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"district",value:this.state.singleWorkerInfo.district,onChange:this.InputHandler,id:"standard-basic",label:"Enter district",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"municipality",value:this.state.singleWorkerInfo.municipality,onChange:this.InputHandler,id:"standard-basic",label:"Enter municipality",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"ward",value:this.state.singleWorkerInfo.ward,onChange:this.InputHandler,id:"standard-basic",label:"Enter ward",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"category",value:this.state.singleWorkerInfo.category,onChange:this.InputHandler,id:"standard-basic",label:"Enter category",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"phone",value:this.state.singleWorkerInfo.phone,onChange:this.InputHandler,id:"standard-basic",label:"Enter phone",InputLabelProps:{shrink:!0}})),r.a.createElement(j.a,{item:!0,xs:12,sm:12},r.a.createElement(de.a,{variant:"outlined",fullWidth:!0},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"Gender"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.state.singleWorkerInfo.gender,name:"gender",onChange:this.InputHandler,label:"gender",InputLabelProps:{shrink:!0}},r.a.createElement(ue.a,{value:"MALE"},"MALE"),r.a.createElement(ue.a,{value:"FEMALE"},"FEMALE"),r.a.createElement(ue.a,{value:"OTHERS"},"OTHERS")))),r.a.createElement(j.a,{item:!0,xs:12,sm:12},r.a.createElement(de.a,{variant:"outlined",fullWidth:!0},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"Kiln Name"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.state.singleWorkerInfo.kiln_id,name:"kiln_id",onChange:this.InputHandlerKiln,label:"kiln",InputLabelProps:{shrink:!0}},t)))),r.a.createElement(i.a,{onClick:function(){return e.scrollToElement("Home")},className:"editWorkerBtn",fullWidth:!0,type:"submit",variant:"contained",color:"primary"},"Submit"))))}}]),a}(n.Component);Ce.contextType=k;var xe=Ce,Oe=Object(ae.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1),textAlign:"center"},submit:{margin:e.spacing(3,0,2)}}})),Ne=function(e){var t=e.InputHandler,a=e.SubmitHandler,n=e.valuea,l=Oe();return r.a.createElement(x.a,{component:"main",maxWidth:"sm"},r.a.createElement("div",{className:l.paper},r.a.createElement(se,{title:"Add Kiln"}),r.a.createElement("form",{className:l.form,action:"",onSubmit:a},r.a.createElement(j.a,{container:!0,spacing:1},r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"name",value:n.name,onChange:t,id:"standard-basic",label:"Enter Kilnname"})),r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"address",value:n.address,onChange:t,id:"standard-basic",label:"Enter Kilnaddress"}))),r.a.createElement(i.a,{onClick:function(){return e="Home",void re.scroller.scrollTo(e,{duration:1e3,delay:100,smooth:!0});var e},className:l.submit,fullWidth:!0,type:"submit",variant:"contained",color:"primary"},"Submit"))))},We=function(){var e={name:"",address:""},t=Object(n.useContext)(k),a=t.KilnNewStatefunc,l=t.kilnInfo,o=t.alertData,i=t.AlertFunc,d=Object(n.useState)(l),p=Object(u.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)(e),E=Object(u.a)(g,2),v=E[0],y=E[1],I=Object(n.useState)(o),S=Object(u.a)(I,2),C=S[0],x=S[1],O=function(){var e=localStorage.getItem("item");return e&&e.length>10}();Object(n.useEffect)((function(){a(Object(s.a)(f))}),[f]),Object(n.useEffect)((function(){i(C)}),[C]);return r.a.createElement("div",null,O?r.a.createElement("div",null,r.a.createElement(Ne,{InputHandler:function(e){var t=e.target.name,a=e.target.value;a=a.toUpperCase(),y((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},t,a))}))},SubmitHandler:function(t){t.preventDefault(),b({method:"POST",url:"kiln/",data:v}).then((function(e){v.id=e.data.id,h([].concat(Object(s.a)(f),[v])),201===e.status&&"Created"===e.statusText&&x({type:"success",msg:"Kiln saved"})})).catch((function(e){x({type:"error",msg:"Something went wrong. Please try again."})})),y(e)},valuea:v})):r.a.createElement(w.a,{to:{pathname:"login"}}))},je=Object(ae.a)({root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:8},posBtn:{marginTop:10}}),Le=function(e){var t=e.kiln,a=je(),l=Object(n.useContext)(k),o=l.deleteKiln,c=l.isSuperUser;return r.a.createElement(j.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(B.a,{className:a.root},r.a.createElement(ne.a,null,r.a.createElement(W.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.name),c()?r.a.createElement(i.a,{onClick:function(){var e;o(t.id),e="Home",re.scroller.scrollTo(e,{duration:1e3,delay:100,smooth:!0})},className:a.posBtn,variant:"contained",color:"secondary"},"Delete"):null)))},Ae=Object(ae.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},inputSection:{width:"95%",margin:"auto"}}})),De=function(){var e=Ae(),t=Object(n.useContext)(k),a=t.searchbykiln,l=t.ChangeOptionFilter;return r.a.createElement("div",null,r.a.createElement("div",{className:e.inputSection},r.a.createElement(j.a,{container:!0,spacing:4},r.a.createElement(j.a,{item:!0,xs:12,sm:6},r.a.createElement(L.a,{fullWidth:!0,label:"Search by Name",id:"outlined-size-small",name:"searchbykiln",value:a,onChange:l,variant:"outlined"})))))},Pe=Object(ae.a)({pos:{marginTop:30,width:"95%",margin:"auto"},addIcon:{width:"95%",marginTop:30,margin:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",color:"primary"},AddIconLink:{display:"flex",alignItems:"center",textDecoration:"none"}}),_e=function(){var e=Pe(),t=function(){var e=localStorage.getItem("item");return e&&e.length>10}(),a=Object(n.useContext)(k),l=a.sortedkilnInfo,o=a.isSuperUser,i=a.kilnInfo,c=Object(n.useState)(1),s=Object(u.a)(c,2),m=s[0],d=s[1],p=Object(n.useState)(9),f=Object(u.a)(p,1)[0];if(!l)return r.a.createElement(te,null);var h=m*f,g=h-f,E=l.slice(g,h).map((function(e){return r.a.createElement(Le,{kiln:e,key:e.id})}));return r.a.createElement("div",{className:"kilnList-Section"},t?r.a.createElement("div",null,o()?r.a.createElement("span",{className:e.addIcon},r.a.createElement(T.b,{to:"/kiln",className:e.AddIconLink},r.a.createElement(ce.a,{color:"primary",fontSize:"large"}),r.a.createElement(W.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Add new kiln")),r.a.createElement(T.b,{to:"/summary",className:e.AddIconLink},r.a.createElement(W.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Summary"),r.a.createElement(be.a,{color:"primary",fontSize:"large"}))):null,r.a.createElement(se,{title:"Kiln List"}),r.a.createElement(De,null),r.a.createElement(O.a,null,r.a.createElement(W.a,{variant:"h5",className:"SelectedWorkers"},"Selected ",r.a.createElement("strong",{className:"sortedOutof"},l.length)," out of ",r.a.createElement("strong",{className:"sortedOutoflength"},i.length)," kilns")),r.a.createElement("div",{className:e.pos},r.a.createElement(j.a,{container:!0,spacing:2},E)),r.a.createElement(Ee,{itemsPerPage:f,totalItems:l.length,paginate:function(e){d(e)}})):r.a.createElement(w.a,{to:{pathname:"login"}}))},Me=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={ngos:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.get("ngos").then((function(t){e.setState({ngos:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.context.isSuperUser,t=this.state.ngos,a=function(){var e=localStorage.getItem("item");return e&&e.length>10}();if(!t)return r.a.createElement(te,null);this.context.workersInfo;var n=t.map((function(e){return r.a.createElement(B.a,{key:e.uuid,style:{"margin-bottom":".5em",padding:"1em"}},r.a.createElement(W.a,{key:e.uuid},e.name),r.a.createElement("div",{style:{"margin-top":".5em"}},r.a.createElement("a",{href:"#register?ngo=".concat(e.uuid),className:"registerLink"},"Registration link")))}));return r.a.createElement("div",{className:"ngolist-Section"},e()?r.a.createElement("div",{className:"ngosummaryLink"},r.a.createElement(T.b,{to:"/summary"},r.a.createElement(W.a,{className:"ngosummarytext",color:"primary",component:"h1",variant:"h6"},"Summary")),r.a.createElement(be.a,{color:"primary",fontSize:"large"})):"",a?r.a.createElement("div",{className:"ngoSection"},r.a.createElement(se,{title:"NgoList"}),r.a.createElement("div",{className:"ngoInnerSection"},n)):r.a.createElement(w.a,{to:{pathname:"/login"}}))}}]),a}(n.Component);Me.contextType=k;var Te=Me,Fe=a(114),He=a(115);function Ke(){var e=Object(Fe.a)(["\n  width: ",";\n\n  border-radius: 5px;\n  margin: 20px 0;\n  padding: 10px;\n  background-color: aliceblue;\n\n  .pay-bar {\n    background-color: orange;\n    height: 15px;\n    transition: 0.5s ease all;\n    text-align: center;\n    color: white;\n    border-radius: 5px;\n    padding: 3px 0;\n  }\n"]);return Ke=function(){return e},e}var Be=function(){var e=localStorage.getItem("item");return e&&e.length>10},Ue=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={allworkers:[],summary:"district",ga:{},kpis:{},max_amount:0,total:{amount:0,workers:0}},e.isAlreadyAuthenticated=Be(),e.getSummaryFunc=function(){var t=e.state.summary,a=e.state.allworkers.filter((function(e){return e.extra&&e.extra.payment})),n=function(e,t){return e.reduce((function(e,a){var n=function(e,t){return"ngo"!==t?e[t]:e.extra.payment.amountpayer.ngo.name}(a,t);return e[n]||(e[n]=[]),e[n].push(a),e}),{})},r=function(e){return e.reduce((function(e,t){return e+parseFloat(t.extra.payment.amount)}),0)},l=n(a,t);e.setState({ga:l,total:{amount:r(a),workers:a.length}});var o={};for(var i in l){var c=n(l[i],"district"==t?"ngo":"district"),m={};for(var u in c)m[u]={name:u,value:r(c[u])};o[i]={name:i,value:r(l[i]),nest:{g:c,nkpis:m}}}e.setState({kpis:o});var d=Math.max.apply(Math,Object(s.a)(Object.values(o).map((function(e){return e.value}))));e.setState({max_amount:d})},e.InputHandler=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(m.a)({},a,n))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({allworkers:this.context.workersInfo},(function(){return e.getSummaryFunc()}))}},{key:"componentDidUpdate",value:function(e,t){t.summary!==this.state.summary&&this.getSummaryFunc()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.isAlreadyAuthenticated?r.a.createElement("div",{className:"newSummary"},r.a.createElement(se,{title:"Summary"}),r.a.createElement("div",{className:"mysum"},r.a.createElement(j.a,{item:!0,xs:12,sm:12},r.a.createElement(de.a,{variant:"outlined",fullWidth:!0,className:"Summarydrop"},r.a.createElement(me.a,{id:"demo-simple-select-outlined-label"},"Summary"),r.a.createElement(pe.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.state.summary,name:"summary",onChange:this.InputHandler,label:"Summamry",InputLabelProps:{shrink:!0}},r.a.createElement(ue.a,{name:"district",value:"district"},"District"),r.a.createElement(ue.a,{name:"ngo",value:"ngo"},"Ngo"))))),r.a.createElement("div",null,r.a.createElement(W.a,{className:"summaryTotalamount",style:{marginTop:"20px"}},"Rs.",this.state.total.amount.toLocaleString("en-hi")," paid to ",r.a.createElement("span",null),this.state.total.workers.toLocaleString("en-hi")," of ",r.a.createElement("span",null),this.state.allworkers.length.toLocaleString("en-hi")," workers")),r.a.createElement("div",{style:{width:"100%"}},Object.entries(this.state.ga).map((function(t,a){var n=Object(u.a)(t,2),l=n[0],o=n[1];return r.a.createElement("div",{key:a},r.a.createElement(Re,null,r.a.createElement(O.a,{mb:2},r.a.createElement(W.a,{variant:"h6"},l),r.a.createElement(W.a,null,"Rs.",e.state.kpis[l].value.toLocaleString("en-hi")," ","paid to ",o.length.toLocaleString("en-hi")," ","workers"),r.a.createElement("div",{className:"pay-bar",style:{width:"".concat(e.state.kpis[l].value/e.state.max_amount*100,"%"),marginBottom:".5em"}})),Object.entries(e.state.kpis[l].nest.nkpis).map((function(t,a){var n=Object(u.a)(t,1)[0];return r.a.createElement("div",{key:a},r.a.createElement(O.a,{my:1},r.a.createElement(W.a,null,n),r.a.createElement(W.a,{variant:"body2"},"Rs.",e.state.kpis[l].nest.nkpis[n].value.toLocaleString("en-hi")," ","paid to"," ",e.state.kpis[l].nest.g[n].length.toLocaleString("en-hi")," ","workers"),r.a.createElement("div",{className:"pay-bar",style:{width:"".concat(e.state.kpis[l].nest.nkpis[n].value/e.state.max_amount*100,"%"),height:"10px"}})))}))))})))):r.a.createElement(w.a,{to:{pathname:"/login"}}))}}]),a}(n.Component);Ue.contextType=k;var Re=He.a.div(Ke(),(function(e){return e.width?e.width:""})),qe=Ue,ze=a(222),Ge=a(217),Je=a(218);var Ve=function(){var e=Object(n.useContext)(k),t=e.alertData,a=e.isSuperUser,l=e.AlertFunc,o=e.user;if(function(){var e=localStorage.getItem("item");return e&&e.length>10}()&&!o)return r.a.createElement(te,null);var i=t?r.a.createElement(Ge.a,{in:!0},r.a.createElement(ze.a,{action:r.a.createElement(Je.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){l(null)}},r.a.createElement($.a,{fontSize:"inherit"})),severity:t.type},t.msg)):null,c=a()?r.a.createElement(w.b,{exact:!0,path:"/workers/:id/",component:xe}):null;return r.a.createElement("div",{className:"App"},r.a.createElement(T.a,null,r.a.createElement(re.Element,{name:"Home"},r.a.createElement(X,null)),i,r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/",component:C}),r.a.createElement(w.b,{exact:!0,path:"/inputnewworker",component:we}),r.a.createElement(w.b,{exact:!0,path:"/register",component:K}),r.a.createElement(w.b,{exact:!0,path:"/login",component:M}),r.a.createElement(w.b,{exact:!0,path:"/logout",component:F}),r.a.createElement(w.b,{exact:!0,path:"/kiln",component:We}),r.a.createElement(w.b,{exact:!0,path:"/workers",component:ye}),r.a.createElement(w.b,{exact:!0,path:"/ngos",component:Te}),r.a.createElement(w.b,{exact:!0,path:"/kilnlist",component:_e}),r.a.createElement(w.b,{exact:!0,path:"/csv",component:S}),r.a.createElement(w.b,{exact:!0,path:"/summary",component:qe}),c,r.a.createElement(w.b,{component:U})),r.a.createElement(Z,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null,r.a.createElement(Ve,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){}},[[136,1,2]]]);
//# sourceMappingURL=main.a5c68d6b.chunk.js.map